# ==============================================
# SIBA API - Configuración de Entorno
# ==============================================
# Copia este archivo a .env y configura los valores según tu entorno

# ==============================================
# DATABASE (PostgreSQL)
# ==============================================
# Formato: postgresql://[usuario]:[contraseña]@[host]:[puerto]/[nombre_bd]?schema=public
# Requisitos:
#   - PostgreSQL 14 o superior
#   - Base de datos creada previamente
# Ejemplo local: postgresql://postgres:admin@localhost:5432/siba-dev?schema=public
DATABASE_URL=postgresql://postgres:password@localhost:5432/siba-dev?schema=public

# ==============================================
# JWT & AUTH (CRITICO - SEGURIDAD)
# ==============================================
# ⚠️ IMPORTANTE: JWT_SECRET es OBLIGATORIO
#
# Requisitos de seguridad (OWASP 2026):
#   - Mínimo 32 caracteres (se valida al startup)
#   - Usar valores criptográficamente seguros
#   - NUNCA commitear valores reales a Git
#   - Diferentes en cada entorno (dev, staging, prod)
#
# Para generar valores seguros, ejecuta:
#   openssl rand -base64 32
#
# NUNCA usar valores por defecto en producción

# JWT Access Token Secret (mínimo 32 caracteres)
# Genera con: openssl rand -base64 32
JWT_SECRET=REPLACE_WITH_SECURE_VALUE_MINIMUM_32_CHARS

# Tiempo de expiración del Access Token
# Recomendado: 15m-1h para producción, 15m-24h para desarrollo
# Formatos válidos: 60s, 5m, 2h, 7d
JWT_EXPIRES_IN=15m

# Refresh Token: almacenado en DB como random string (httpOnly cookie)
# Tiempo de vida en días. Recomendado: 7-30 días
REFRESH_TOKEN_EXPIRY_DAYS=7

# ==============================================
# API SERVER
# ==============================================
# Puerto donde escucha la API
API_PORT=3001

# Host de la API
API_HOST=localhost

# ==============================================
# FRONTEND (para CORS y configuración)
# ==============================================
# URL del frontend para configurar CORS
# En producción, usar dominio real (https://siba.tuempresa.com)
VITE_API_URL=http://localhost:3001

# ==============================================
# STORAGE (Archivos y Documentos)
# ==============================================
# Tipo de almacenamiento: 'local' o 'minio'
# local: Almacenamiento en sistema de archivos
# minio: Almacenamiento S3-compatible (requiere Docker)
STORAGE_TYPE=local

# Ruta de almacenamiento local (solo si STORAGE_TYPE=local)
# Ruta relativa a apps/api/ o absoluta
STORAGE_PATH=./uploads

# ==============================================
# MINIO (Object Storage S3-compatible)
# ==============================================
# Solo necesario si STORAGE_TYPE=minio
# Requiere Docker: docker-compose up -d minio

# Credenciales de acceso a MinIO
# ⚠️ Cambiar en producción
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# Endpoint de MinIO
MINIO_ENDPOINT=localhost
MINIO_PORT=9000

# Bucket para almacenar archivos
# Debe crearse antes de usar
MINIO_BUCKET=siba

# ==============================================
# NODE ENVIRONMENT
# ==============================================
# Entorno de ejecución
# Valores válidos: development, production, test
# Afecta:
#   - Logging (más verboso en development)
#   - Error messages (stack traces solo en development)
#   - Validaciones (más estrictas en production)
NODE_ENV=development

# ==============================================
# NOTAS IMPORTANTES
# ==============================================
#
# 1. SEGURIDAD:
#    - JWT_SECRET DEBE tener al menos 32 caracteres
#    - El servidor NO iniciara si no cumple con este requisito
#    - Genera valores unicos con: openssl rand -base64 32
#    - Los refresh tokens son random strings almacenados en DB (tabla refresh_tokens)
#
# 2. PRODUCCIÓN:
#    - Usa variables de entorno del sistema/plataforma
#    - Nunca commitees .env a Git (ya está en .gitignore)
#    - Rota los JWT secrets periódicamente
#    - Usa HTTPS para VITE_API_URL
#
# 3. DESARROLLO:
#    - Copia este archivo a .env
#    - Genera JWT secrets únicos para tu entorno local
#    - Asegúrate de tener PostgreSQL corriendo
#    - Ejecuta: npx prisma migrate dev
#
# 4. TESTING:
#    - Usa .env.test con valores específicos para tests
#    - JWT secrets pueden ser más simples en tests
#
# ==============================================
